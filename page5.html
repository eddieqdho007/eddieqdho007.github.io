<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quiz 40 Questions</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .header-bar {
            display: grid;
            grid-template-columns: 30% 20% 5% 25% 5% 15%;
            position: fixed;
            top: 0;
            width: 100%;
            height: 40px;
            background-color: white;
            text-align: center;
            font-size: 18px;
            color: black;
            border-bottom: 1px solid rgba(0, 0, 0, 0.4);
            z-index: 999;
        }

        .header-bar div {
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid rgba(0, 0, 0, 0.4);
        }

        .header-bar div:nth-child(1) {
            background-color: #0000001a;
            border-left: 1px solid rgba(0, 0, 0, 0.4);
        }

        .header-bar div:nth-child(2) {
            background-color: #0000001a;
        }

        .header-bar div:nth-child(3) {
            background-color: #84afbd;
        }

        .header-bar div:nth-child(4) {
            background-color: #0000001a;
        }

        .header-bar div:nth-child(5) {
            background-color: #e47a6e;
        }

        .header-bar div:nth-child(6) {
            background-color: #6eb0f1de;
        }

        .container {
            display: grid;
            grid-template-columns: 55% 45%;
            margin-top: 40px;
            height: calc(100vh - 40px);
        }

        .soal,
        .jawaban {
            padding: 5px;
            padding-bottom: 50px;
            overflow-y: auto;
            border-left: 1px solid rgba(0, 0, 0, 0.4);
            border-right: 1px solid rgba(0, 0, 0, 0.4);
            background-color: white;
            font-size: 20px;
        }

        .pertanyaan {
            padding: 5px;
            display: none;
        }

        .pertanyaan.active {
            display: block;
        }

        .pertanyaan img,
        .jawaban-gambar,
        .review-image {
            display: block;
            max-width: 50%;
            height: auto;
            margin: 15px auto;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .pertanyaan img:hover,
        .jawaban-gambar:hover,
        .review-image:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            touch-action: none;
        }

        .zoom-area {
            width: 100%;
            height: 100%;
            overflow: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: none;
        }

        .zoom-area img {
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
            transition: transform 0.25s ease;
        }

        @media (orientation: landscape) {
            .zoom-area img {
                max-width: 80vw;
                max-height: 80vh;
            }
        }

        .btn-tutup {
            position: absolute;
            top: 16px;
            right: 20px;
            background-color: #fff;
            color: #000;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10000;
        }

        .jawaban-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.3);
        }

        .jawaban-item:last-child {
            border-bottom: none;
        }

        .lingkaran {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: white;
            color: black;
            border: 1px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            cursor: pointer;
            transition: 0.2s;
            flex-shrink: 0;
        }

        .jawaban-item.selected .lingkaran {
            background-color: black;
            color: white;
        }

        .teks-jawaban {
            flex-grow: 1;
            white-space: normal;
            overflow-wrap: break-word;
            min-width: 0;
            font-size: 20px;
        }

        .footer-button {
            display: flex;
            justify-content: space-between;
            background-color: #ffffff;
            border-top: 1px solid rgba(0, 0, 0, 0.4);
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .footer-button button {
            width: 200px;
            height: 40px;
            font-size: 18px;
            border: none;
            border-left: 1px solid rgba(0, 0, 0, 0.4);
            border-right: 1px solid rgba(0, 0, 0, 0.4);
            background-color: #0000001a;
            color: black;
            cursor: pointer;
        }

        .footer-button button:hover {
            background-color: #00000063;
        }

        .footer-button button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .footer-button .tengah {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            cursor: pointer;
        }

        .pertanyaan h3,
        .pertanyaan p,
        .teks-jawaban,
        .lingkaran,
        .deskripsi-soal {
            font-size: 20px;
            line-height: 1.4;
        }

        .pertanyaan h3 {
            margin: 10px;
            margin-bottom: 20px;
        }

        .pertanyaan p {
            margin: 10px;
            line-height: 1.5;
        }

        .deskripsi-soal {
            line-height: 1.5;
            color: none;
            margin: 10px;
            background-color: white;
        }

        .text-box,
        .text-box-2 {
            display: block;
            max-width: 80%;
            margin: 15px auto;
            padding: 15px;
            background-color: white;
            border: 1px solid #cacaca;
            font-size: 20px;
            line-height: 1.5;
        }

        .text-box-2 {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .audio-container,
        .audio-control {
            display: none;
            text-align: center;
            margin: 15px auto;
            max-width: 200px;
            overflow: hidden;
        }

        .custom-audio-player,
        .jawaban-audio-player {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto;
            gap: 10px;
        }

        .custom-audio-player button,
        .jawaban-audio-player button,
        .review-audio-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .custom-audio-player button:disabled,
        .jawaban-audio-player button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .custom-audio-player button img,
        .jawaban-audio-player button img,
        .review-audio-btn img {
            width: 100%;
            height: 100%;
            border: 2px solid rgb(22, 31, 170);
            border-radius: 10px;
        }

        .audio-icon {
            width: 80px;
            height: 80px;
            border: 2px solid rgb(22, 31, 170);
            border-radius: 15px;
            box-sizing: border-box;
            overflow: hidden;
            padding: 5px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .jawaban-item .jawaban-content {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
        }

        .jawaban-gambar {
            max-width: 100px;
            max-height: 60px;
            border-radius: 4px;
        }

        .jawaban-audio-player {
            justify-content: flex-start;
            margin-left: 10px;
        }

        .jawaban-audio-player button {
            width: 60px;
            height: 60px;
        }

        .jawaban-audio-player button img {
            border-radius: 10px;
        }

        .review-question {
            margin: 30px 50px;
            padding: 70px;
            border: 1px solid #2c2c2c;
            border-radius: 8px;
            background-color: white;
            font-size: 20px;
        }

        .review-option-content {
            font-size: 20px;
            line-height: 1.5;
        }

        .review-question-content {
            margin-bottom: 15px;
            font-size: 20px;
        }

        .review-options {
            margin-top: 15px;
            font-size: 20px;
        }

        .review-option {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 20px;
        }

        .review-option.correct {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .review-option.user-selected {
            background-color: #FFEBEE;
        }

        .review-option.correct.user-selected {
            background-color: #E8F5E9;
        }

        .review-option-number {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            background-color: #f5f5f5;
            font-size: 20px;
        }

        .review-option.correct .review-option-number,
        .review-option.correct.user-selected .review-option-number {
            background-color: #4CAF50;
            color: white;
            font-size: 20px;
        }

        .review-option.user-selected .review-option-number {
            background-color: #f44336;
            color: white;
            font-size: 20px;
        }

        .review-audio-btn {
            width: 60px;
            height: 60px;
            margin: 0 20px;
        }

        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }

        .result-content {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-result-btn {
            padding: 10px 20px;
            background-color: #6eb0f1;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .audio-transcript {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-left: 3px solid #6eb0f1;
            font-size: 18px;
            line-height: 1.5;
            color: #333;
            border-radius: 0 4px 4px 0;
        }

        .custom-dialog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100000;
        }

        .custom-dialog-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .custom-dialog-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .custom-dialog-button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .custom-dialog-confirm {
            background-color: #6eb0f1;
            color: white;
        }

        .custom-dialog-cancel {
            background-color: #f44336;
            color: white;
        }

        .progress-container {
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .progress-container:hover {
            background-color: #ccc;
        }

        .progress-bar {
            transition: width 0.1s linear;
        }

        .audio-player-container {
            width: 100%;
            margin-top: 8px;
        }

        .progress-container {
            width: 100%;
            height: 4px;
            background-color: #ddd;
            border-radius: 2px;
            position: relative;
            cursor: pointer;
            margin-bottom: 4px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #6eb0f1;
            border-radius: 2px;
        }

        .time-container {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
        }

        .current-time {
            font-weight: bold;
        }

        .question-list-container {
            width: 90%;
            max-width: 800px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin: 20px auto;
        }

        .question-list-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .question-list-btn {
            width: 100%;
            height: 40px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background-color: #f5f5f5;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .question-list-btn:hover {
            background-color: #e0e0e0;
        }

        .question-list-btn.current {
            background-color: #6eb0f1;
            color: white;
        }

        .question-list-btn.answered {
            background-color: #4CAF50;
            color: white;
        }

        .question-list-btn.unanswered {
            background-color: #f44336;
            color: white;
        }

        @media (max-width: 768px) {
            .footer-button button {
                width: 150px;
                font-size: 16px;
            }

            .review-question {
                margin: 30px 20px;
                padding: 30px;
            }

            .question-list-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 480px) {
            .footer-button button {
                width: 120px;
                font-size: 16px;
            }

            .question-list-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media screen and (orientation: landscape) {
            .result-overlay {
                padding: 10px;
            }

            .result-content {
                max-height: 80vh;
            }
        }

        u {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="overlay" id="zoomOverlay">
        <button class="btn-tutup" onclick="tutupZoom()">✕</button>
        <div class="zoom-area">
            <img id="gambarZoom" src="" alt="Zoom Gambar">
        </div>
    </div>

    <div class="header-bar">
        <div>Reading (20 Questions)</div>
        <div>Whole Questions</div>
        <div>40</div>
        <div>Remaining Questions</div>
        <div>40</div>
        <div>50 : 00</div>
    </div>

    <div class="container">

        <div class="soal">
        </div>

        <div class="jawaban">
        </div>
    </div>

    <div class="footer-button">
        <button onclick="prevQuestion()">Previous Question</button>
        <button class="tengah" onclick="showQuestionList()">Question <span id="current-question">1</span> of 40</button>
        <button onclick="nextQuestion()">Next Question</button>
    </div>

    <script src="https://unpkg.com/@panzoom/panzoom@9.4.0/dist/panzoom.min.js"></script>
    <script>

        let panzoomInstance;
        let currentQuestion = 1;
        const totalQuestions = 40;
        let remainingQuestions = 40;
        let timerInterval;
        let timeLeft = 50 * 60;
        let hasShownFiveMinuteWarning = false;
        const timerDisplay = document.querySelector('.header-bar div:nth-child(6)');
        let quizData = {};
        let currentReviewAudio = null;
        let currentReviewAudioButton = null;
        let currentProgressContainer = null;
        let currentTimeDisplay = null;
        let durationDisplay = null;
        let currentProgressBar = null;
        let currentAudio = null;
        let audioPlayCounts = {};
        let jawabanAudioPlayCounts = {};
        const correctAnswers = {};
        const userAnswers = {};
        let score = 0;
        const audioTranscripts = {

            "21": "토용일에 한국어를 공부해요",

            "22": "2 층으로 가야 돼요.",

            "23": "저는 회시가 가까워서 걸어왔어요.",

            "24": "이제 창문을 닦아야 돼요.",

            "25": "이것은 무엇입니까?",
            "25-0": "항공권입니다",
            "25-1": "상품권입니다",
            "25-2": "여권입니다",
            "25-3": "식권입니다",

            "26": "여기는 어디입니까 ?",
            "26-0": "교실입니다",
            "26-1": "거실입니다",
            "26-2": "객실입니다",
            "26-3": "침실입니다",

            "27": "이 사람은 무엇을 하고 있습니까?",
            "27-0": "양파를 썰고 있습니다",
            "27-1": "영파를 씻고 있습니다",
            "27-2": "양파를 담고 있습니다",
            "27-3": "양파를 볶고 있습니다",

            "28": "수분 크림이 얼마나 있습니까?",
            "28-0": "3 개 있습니다",
            "28-1": "3 통 있습니다",
            "28-2": "4 개 있습니다",
            "28-3": "4 통 있습니다",

            "29": "꽃집은 어디에 있습니까?",
            "29-0": "약국 아래에 있습니다",
            "29-1": "공원 옆에 있습니다",
            "29-2": "병원 위에 있습니다",
            "29-3": "은행 뒤에 있습니다",

            "30": "체육 대회는 다른 날로 연기하는 게 어때요?",

            "31": "한국에 오기 전에는 무슨 일을 하셨어요?",

            "32": "요즘을 유투브를 보는 사람이 정말 많아졌지요?",

            "33": "안젤라 씨, 무슨 일 있어요? 아까보터 표정이 안 좋아 보여요.",

            "34": "왜 안전모를 손에 들고 있어요?",

            "35": "어젯밤에 몇 시까지 일했어요?",

            "36": "야 : 실려지만 명동에 어떻게 가요?<br>남 : 사당역에서 지하철 4 호선을 타세요.",

            "37": "여 : 이거 어제 산 옷인데요?<br>남 : 네 고객님, 무슨 문제가 있으세요?<br>여 : 집에서 다시 입어 봤는데 좀 작았어요.",

            "38": "남 : 어서 오세요. 어제 수지 씨 전화를 받고 나서 아파트를 좀 찾아 왔어요.<br>여 : 네, 말씀 드린 대로 저는 지하철역이나 버스 정류장이 가까운 곳이 좋아요. 침실은 2 개여야 하고 화장실은 하나만 있어도 되고요.<br>남 : 네, 수지 씨하고 딱 맞는 곳이 있어요. 그런데 조금 비싸요.<br>여 : 얼마나 비싼데요? 저는 돈이 그렇게 많지 않아요.<br>남 : 우선 가서 보고 정하도록 하죠. 지하철역에서 조금 멀어도 조용하고 괜찮은 곳이 있거든요. 가보시죠.<br>여 : 네, 보고 결정할게요.",

            "39": "여 : 어서 오세요. 어디로 가세요?<br>남 : 오늘 부산 가는 기차 표가 남았나요?<br>여 : 잠시만요. 네, 남아 있어요. 몇 시에 출발하시는데요?<br>남 : 그냥 오늘 출발하는 거 아무거나 괜찮아요. 2 명이 같이 앉을 수 있는 자리로 주세요.<br>여 : 2 분이 같이 앉을 수 있는 자리는 저녁 7 시, 8 시 반, 10 시 기차에 있네요. 몇 시에 하시겠어요?<br>남 : 그럼 8 시 반 기차로 주세요.",

            "40": "여 : 진수 씨, 어디 그렇게 바쁘게 가세요?<br>남 : 백화점이 문 닫기 전에 가야 했어요.<br>여 : 뭘 사려고 하는데요?<br>남 : 내일 회사 면점이 있는데 집에 있는 구두가 다 낡아서 신을 수 가 없게더라고요. 그래서 빨리 하나 사려고 해요.<br>여 : 빨리 가 봐야겠네요. 같이 가서 골라 줄까요? 제가 다른 건 몰라도 남자 구두는 잘 고르거든요.<br>남 : 그래요? 그럼 같이 가 주세요. 고마워요.",
        };

        async function loadAudioTranscripts() {
            try {
                const response = await fetch('audio-transcripts.json');
                if (!response.ok) throw new Error('Failed to load audio transcripts');
                audioTranscripts = await response.json();
            } catch (error) {
                console.error('Error loading audio transcripts:', error);
                audioTranscripts = {};
            }
        }

        async function loadQuizData() {
            try {
                const response = await fetch('quiz-data.json');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                quizData = await response.json();
                initializeQuiz();
            } catch (error) {
                console.error("Gagal memuat quiz-data.json:", error);
                useFallbackData();
            }
        }

        function useFallbackData() {
            quizData = {
                questions: Array.from({ length: 40 }, (_, i) => ({
                    id: i + 1,
                    section: i < 20 ? "Reading" : "Listening",
                    question: `Question ${i + 1} (${i < 20 ? "Reading" : "Listening"})`,
                    description: `This is a sample question for number ${i + 1}`,
                    options: ["Option 1", "Option 2", "Option 3", "Option 4"],
                    correctAnswer: i % 4
                }))
            };

            quizData.questions[0] = {
                id: 1,
                section: "Reading",
                question: "[1 – 2] 다음 그림을 보고 맞는 단어나 문장을 고르십시오.",
                description: "1.",
                image: "image/1_p5.png",
                options: ["상하입니다.", "좌우입니다.", "회전입니다.", "전원입니다."],
                correctAnswer: 2
            };

            quizData.questions[1] = {
                id: 2,
                section: "Reading",
                question: "",
                description: "2.",
                image: "image/2_p5.png",
                options: ["만두를 끓이고 있습니다.", "만두를 굽고 있습니다.", "만두를 튀기고 있습니다.", "만두를 찌고 있습니다."],
                correctAnswer: 3
            };

            quizData.questions[2] = {
                id: 3,
                section: "Reading",
                question: "[3 – 4] 다음 질문에 답하십시오.",
                description: "3. 다음 단어와 관계있는 것은 고르십시오.",
                textBox2: "레버",
                options: ["밀다", "믿다", "쌓다", "뽑다"],
                correctAnswer: 0
            };

            quizData.questions[3] = {
                id: 4,
                section: "Reading",
                question: "",
                description: "4. 다음 단어의 비슷말은 무엇입니까 ?",
                textBox2: "투입하다",
                options: ["담다", "제거하다", "놓다", "종합하다"],
                correctAnswer: 0
            };

            quizData.questions[4] = {
                id: 5,
                section: "Reading",
                question: "[5 – 8] 빈칸에 들아갈 가장 알맞은 것을 고르십시오.",
                description: "5.",
                textBox: "작업장에서 발생하는 폐기물은 환경을 __________ 시키고 근로자의 건강을 해치는 원인이 됩니다.",
                options: ["질식", "중독", "오염", "경고"],
                correctAnswer: 2
            };

            quizData.questions[5] = {
                id: 6,
                section: "Reading",
                question: "",
                description: "6",
                textBox: "가: 이 호피스텔은 방이 좁네요.<br>나: 네 방은 __________ 월세가 싸요.",
                options: ["좁지만", "줍고", "좁을때", "줍거나"],
                correctAnswer: 0
            };

            quizData.questions[6] = {
                id: 7,
                section: "Reading",
                question: "",
                description: "7",
                textBox: "토요일과 일요일에는 도로가 항상 복잡합니다.; 주말에 약속이 있다면 약속 시간에 늦지 않도록 __________ 출발하는 것이 좋습니다.",
                options: ["일찍", "이따가", "이미", "나중에"],
                correctAnswer: 0
            };

            quizData.questions[7] = {
                id: 8,
                section: "Reading",
                question: "",
                description: "8",
                textBox: "가: 왜 모임에 안 왔어요? 모두가 기다리고 있었어요.<br>나: 죄송해요. 감기가 너무 _________집에서 쉬었어요.",
                options: ["걸려서", "심해서", "걸리고", "심하고"],
                correctAnswer: 1
            };

            quizData.questions[8] = {
                id: 9,
                section: "Reading",
                question: "[9 – 12] 다음 질문에 답하십시오.",
                description: "9. 다음 중 밑줄 친 부분이 맞는 문장을 고르십시오.",
                options: ["<p>표면의 물기를 <u>주웠어요.</u></p>", "<p>선체 표면의 녹을 <u>제거했어요.</u></p>", "<p>선체 내부의 온도를 <u>처리했어요.</u></p>", "<p>오늘 사용할 도료를 <u>조립했어요.</u></p>"],
                correctAnswer: 1
            };

            quizData.questions[9] = {
                id: 10,
                section: "Reading",
                question: "",
                description: "10. 다음 내용과 관계있는 그림을 고르십시오.",
                textBox2: "의자를 앞뒤로흔들지 마세요.",
                options: [
                    { type: 'image', value: 'image/10_1_p5.png' },
                    { type: 'image', value: 'image/10_2_p5.png' },
                    { type: 'image', value: 'image/10_3_p5.png' },
                    { type: 'image', value: 'image/10_4_p5.png' }
                ],
                correctAnswer: 1
            };

            quizData.questions[10] = {
                id: 11,
                section: "Reading",
                question: "",
                description: "11. 다음 글을 읽고 내용과 같은 것을 고르십시오.",
                image: "image/11_p5.png",
                options: ["유럽에 가는 여행자들이 가장 적습니다.", "미국에 가는 사람보다 일본에 가는 사람들이 많습니다.", "중앙아시아에 가는 사람들이 가장 많습니다.", "중국에 여행하는 관광객이 별로 없습니다."],
                correctAnswer: 1
            };

            quizData.questions[11] = {
                id: 12,
                section: "Reading",
                question: "",
                description: "12. 다음 글을 읽고 내용과 같은 것을 고르십시오.",
                image: "image/12_p5.png",
                options: ["2023 년에도 노동자는 회사를 바꾸지 않는다.", "두 번째로 많은 직원이 회사를 바꾸는 것은 2022 년입니다.", "2020 년과 2022 년에 회사를 바꾸는 직원의 비율은 동일합니다.", "2021 년에 회사를 바꾸는 근로자의 수는 2023 년보다 많습니다."],
                correctAnswer: 2
            };

            quizData.questions[12] = {
                id: 13,
                section: "Reading",
                question: "[13 – 14] 빈칸에 들어갈 가장 알맞은 것을 고르십시오.",
                description: "13.",
                textBox: "친구가 근로 계약이 끝나서 내일 고향에 돌아간다고 해요. 그래서 오늘 아침에 친구에게 마지막으로 ___________.",
                options: ["축하했어요.", "칭찬했어요.", "환승했어요.", "환송했어요."],
                correctAnswer: 3
            };

            quizData.questions[13] = {
                id: 14,
                section: "Reading",
                question: "",
                description: "14.",
                textBox: "지하철에서 내릴때 지갑을 안에 두고 내린 것 같습니다. 지금 바로 분실물 센터에 전화해서 ____________.",
                options: ["문이 한 것 같습니다.", "문의 하려고 합니다.", "선택한 것 같습니다", "선택 하려고 합니다"],
                correctAnswer: 1
            };

            quizData.questions[14] = {
                id: 15,
                section: "Reading",
                question: "[15 – 16] 다음 글을 읽고 무엇에 대한 글인지 고르십시오.",
                description: "15.",
                textBox: "플라스틱과 고무 성형은 다양한 제품을 제조하는 데 사용되는 중요한 공정입니다. 이 공정은 원료를 원하는 형태로 가공하여 최종 제품을 만들어내는 과정을 포함하며, 자동차 부품, 전자기기, 의료기기, 가정용품 등 다양한 산업 분야에 활용됩니다.",
                options: ["플라스틱과 고무 성형 차이", "플라스틱과 고무 성형 공정", "플라스틱과 고무 종류", "플라스틱과 고무 폐기물"],
                correctAnswer: 1
            };

            quizData.questions[15] = {
                id: 16,
                section: "Reading",
                question: "",
                description: "16.",
                textBox: "호두는 세계적으로 사랑받는 견과류 중 하나로, 그 독특한 맛과 영양소 덕분에 건강식품으로 널리 알려져 있습니다. 호두는 신선도를 유지하기 위해 서늘하고 건조한 곳에 보관하는 것이 좋습니다. 껍질이 있는 상태로 보관하면 더 오래 신선함을 유지할 수 있습니다. 하루 30g(약 한 줌)의 호두를 섭취하는 것이 적절하며, 과도한 섭취는 칼로리 섭취량 증가로 이어질 수 있으니 주의가 필요합니다.",
                options: ["좋은 호두 고르는 법", "호두를 보관 및 섭취 방법", "호두에 있는 영양", "호두를 먹는 의미"],
                correctAnswer: 1
            };

            quizData.questions[16] = {
                id: 17,
                section: "Reading",
                question: "[17 – 18] 다음 글을 읽고 내용과 같은 것을 고르십시오.",
                description: "17.",
                textBox: "그라인더는 빠른 회전으로 물체를 절단하거나 표면을 매끄럽게 가공하는 전동 공구입니다. 작업 시 큰 상해를 방지하려면 다음을 주의해야 합니다. 전원을 꽂기 전에 스위치가 꺼져 있는지 확인하고, 날 교체는 반드시 전원을 끈 상태에서 작업합니다. 보안경, 방진마스크 등을 착용하고 안전커버를 장착해야 하고 작업 주변을 정리하고 소화기를 비치합니다. 올바른 사용법을 익혀 안전을 지키세요.",
                options: ["그라인더 사용 전, 전원 스위치가 꺼져 있는지 확인해야 합니다.", "그라인더 작업 중에는 보호구를 착용할 필요가 없습니다.", "날 교체 시 전원을 켠 상태에서 빠르게 작업을 마무리해야 합니다.", "작업 중 주변 정리를 하지 않아도 화재 위험이 없습니다."],
                correctAnswer: 0
            };

            quizData.questions[17] = {
                id: 18,
                section: "Reading",
                question: "",
                description: "18.",
                textBox: "친환경 에너지는 태양광, 풍력, 수력, 해양, 지열 에너지처럼 자연 자원을 활용해 지속 가능하게 생산되며, 환경 파괴와 온실가스 배출을 줄이는 데 기여합니다. 초기 설치 비용은 높지만, 운영 비용이 낮고 자원이 고갈되지 않는 장점이 있습니다. 세계 각국은 화석 연료 고갈과 기후 변화 문제 해결을 위해 친환경 에너지 개발에 힘쓰고 있으며, 이는 지속 가능한 미래를 만드는 열쇠가 됩니다.",
                options: ["친환경 에너지는 화석 연료보다 온실가스를 더 많이 배출합니다.", "풍력 에너지는 바람이 필요 없이 작동합니다.", "친환경 에너지는 자원이 금방 고갈되어 지속적으로 사용할 수 없습니다.", "친환경 에너지는 자연 자원을 활용해 환경 영향을 최소화합니다."],
                correctAnswer: 3
            };

            quizData.questions[18] = {
                id: 19,
                section: "Reading",
                question: "[19 – 20] 다음 설명에 알맞은 어휘를 고르십시오.",
                description: "19.",
                textBox: "근로자가 업무 중 또는 업무와 관련된 활동을 수행하다가 발생한 부상, 질병, 장애 또는 사망과 같은 신체적·정신적 피해를 말합니다. 이는 주로 작업 환경의 위험 요소나 부적절한 안전 관리로 인해 발생하며, 근로자의 안전과 건강에 중대한 영향을 미칩니다.",
                options: ["자연 재해", "산업 재해", "교통 사고", "복합재해"],
                correctAnswer: 1
            };

            quizData.questions[19] = {
                id: 20,
                section: "Reading",
                question: "",
                description: "20.",
                textBox: "사람의 나이가 70 세에 달하는 것을 의미합니다. 전통적으로 큰 의미를 가지는 나이로, 특히 동양 문화에서 중요한 생일 중 하나로 여겨집니다. 70 세는 인생의 중요한 이정표로, 건강과 삶의 경륜을 기념하는 행사나 축하가 이루어지기도 합니다.",
                options: ["돌", "환갑", "칠순", "백일"],
                correctAnswer: 2
            };

            quizData.questions[20] = {
                id: 21,
                section: "Listening",
                question: "[21 – 24] 들은 것을 고르십시오.",
                description: "21.",
                textBox2: "_________에 한국어를 공부해요.",
                audio: "audio/21_p5.mp3",
                options: ["목요일", "일요일", "토요일", "월요일"],
                correctAnswer: 2
            };

            quizData.questions[21] = {
                id: 22,
                section: "Listening",
                question: "",
                description: "22.",
                textBox2: "2 층으로 __________.",
                audio: "audio/22_p5.mp3",
                options: ["타야 돼요", "가야 돼요.", "사야 돼요", "봐야 돼요"],
                correctAnswer: 1
            };

            quizData.questions[22] = {
                id: 23,
                section: "Listening",
                question: "",
                description: "23.",
                textBox2: "",
                audio: "audio/23_p5.mp3",
                options: [
                    { type: 'image', value: 'image/23_1_p5.png' },
                    { type: 'image', value: 'image/23_2_p5.png' },
                    { type: 'image', value: 'image/23_3_p5.png' },
                    { type: 'image', value: 'image/23_4_p5.png' }
                ],
                correctAnswer: 1
            };

            quizData.questions[23] = {
                id: 24,
                section: "Listening",
                question: "",
                description: "24.",
                textBox2: "",
                audio: "audio/24_p5.mp3",
                options: [
                    { type: 'image', value: 'image/24_1_p5.png' },
                    { type: 'image', value: 'image/24_2_p5.png' },
                    { type: 'image', value: 'image/24_3_p5.png' },
                    { type: 'image', value: 'image/24_4_p5.png' }
                ],
                correctAnswer: 0
            };

            quizData.questions[24] = {
                id: 25,
                section: "Listening",
                question: "[25 – 29] 그림을 보고 알맞은 대답을 고르십시오.",
                description: "25. 이것은 무엇입니까 ?",
                image: "image/25_p5.png",
                options: [
                    { type: 'audio', value: 'audio/25_1_p5.mp3' },
                    { type: 'audio', value: 'audio/25_2_p5.mp3' },
                    { type: 'audio', value: 'audio/25_3_p5.mp3' },
                    { type: 'audio', value: 'audio/25_4_p5.mp3' }
                ],
                correctAnswer: 0
            };

            quizData.questions[25] = {
                id: 26,
                section: "Listening",
                question: "",
                description: "26. 여기는 어디입니까 ?",
                image: "image/26_p5.png",
                options: [
                    { type: 'audio', value: 'audio/26_1_p5.mp3' },
                    { type: 'audio', value: 'audio/26_2_p5.mp3' },
                    { type: 'audio', value: 'audio/26_3_p5.mp3' },
                    { type: 'audio', value: 'audio/26_4_p5.mp3' }
                ],
                correctAnswer: 2
            };

            quizData.questions[26] = {
                id: 27,
                section: "Listening",
                question: "",
                description: "27.  이 사람은 지금 무엇을 하고 있습니까 ?",
                image: "image/27_p5.png",
                options: [
                    { type: 'audio', value: 'audio/27_1_p5.mp3' },
                    { type: 'audio', value: 'audio/27_2_p5.mp3' },
                    { type: 'audio', value: 'audio/27_3_p5.mp3' },
                    { type: 'audio', value: 'audio/27_4_p5.mp3' }
                ],
                correctAnswer: 1
            };

            quizData.questions[27] = {
                id: 28,
                section: "Listening",
                question: "",
                description: "28. 수분 크림이 얼마나 있습니까?",
                image: "image/28_p5.png",
                options: [
                    { type: 'audio', value: 'audio/28_1_p5.mp3' },
                    { type: 'audio', value: 'audio/28_2_p5.mp3' },
                    { type: 'audio', value: 'audio/28_3_p5.mp3' },
                    { type: 'audio', value: 'audio/28_4_p5.mp3' }
                ],
                correctAnswer: 1
            };

            quizData.questions[28] = {
                id: 29,
                section: "Listening",
                question: "",
                description: "29. 꽃집은 어디에 있습니까? ",
                image: "image/29_p5.png",
                options: [
                    { type: 'audio', value: 'audio/29_1_p5.mp3' },
                    { type: 'audio', value: 'audio/29_2_p5.mp3' },
                    { type: 'audio', value: 'audio/29_3_p5.mp3' },
                    { type: 'audio', value: 'audio/29_4_p5.mp3' }
                ],
                correctAnswer: 1
            };

            quizData.questions[29] = {
                id: 30,
                section: "Listening",
                question: "[30 – 33] 다음을 듣고 질문에 알맞은 대답을 고르십시오.",
                description: "30.",
                audio: "audio/30_p5.mp3",
                options: ["그럼 일기예보를 환인해야 겠네요.", "그렇게라도 하는 게 더 좋을 것 같아요.", "체육 대회 장소를 정했어요?.", "시간이 괜찮으니까 천천히 하면 돼요."],
                correctAnswer: 1
            };

            quizData.questions[30] = {
                id: 31,
                section: "Listening",
                question: "",
                description: "31.",
                audio: "audio/31_p5.mp3",
                options: ["한국에 오기 전에 한국말을 배웠어요.", "한국 회사에서 일하는 게 힘들었어요.", "양식장에서 새우를 길렀어요.", "고향에서는 작은 공장들이 많아요."],
                correctAnswer: 2
            };

            quizData.questions[31] = {
                id: 32,
                section: "Listening",
                question: "",
                description: "32.",
                audio: "audio/32_p5.mp3",
                options: ["맞아요, 인터넷이 있으면 편리할게요.", "맞아요, 저도 유투브를 보는 걸 좋아해요.", "맞아요, 유투브에서 볼 수 있어요.", "맞아요, 일하는 동안 유투브를 보지 마요."],
                correctAnswer: 1
            };

            quizData.questions[32] = {
                id: 33,
                section: "Listening",
                question: "",
                description: "33.",
                audio: "audio/33_p5.mp3",
                options: ["월급이 올라서 기분이 좋아요.", "기분이 안 좋아서 잠깐 쉬고 싶어요.", "일이 많아서 정신이 없어서요.", "좋은 표정이 보니까 마음이 편하네요."],
                correctAnswer: 2
            };

            quizData.questions[33] = {
                id: 34,
                section: "Listening",
                question: "[34 – 35] 다음을 듣고 이어지는 말을 고르십시오.",
                description: "34.",
                audio: "audio/34_p5.mp3",
                options: ["안전모가 작아서 바꾸려고 해요.", "안전모를 착용했으니까 괜찮을게요.", "일이 끝난 후에는 안전모를 보관하세요.", "날씨가 너무 더워서 벗었습니다."],
                correctAnswer: 3
            };

            quizData.questions[34] = {
                id: 35,
                section: "Listening",
                question: "",
                description: "35.",
                audio: "audio/35_p5.mp3",
                options: ["조금 늦게까지 퇴근했어요.", "밤에 일하다가 손이 다쳤어요.", "일주일 동안 주간 근무만 했어요.", "야간이 많아서 월급이 많아졌어요."],
                correctAnswer: 0
            };

            quizData.questions[35] = {
                id: 36,
                section: "Listening",
                question: "[36 – 37] 잘 듣고 들은 내용과 관계있는 그림을 고르십시오.",
                description: "36.",
                audio: "audio/36_p5.mp3",
                options: [
                    { type: 'image', value: 'image/36_1_p5.png' },
                    { type: 'image', value: 'image/36_2_p5.png' },
                    { type: 'image', value: 'image/36_3_p5.png' },
                    { type: 'image', value: 'image/36_4_p5.png' }
                ],
                correctAnswer: 1
            };

            quizData.questions[36] = {
                id: 37,
                section: "Listening",
                question: "",
                description: "37.",
                audio: "audio/37_p5.mp3",
                options: [
                    { type: 'image', value: 'image/37_1_p5.png' },
                    { type: 'image', value: 'image/37_2_p5.png' },
                    { type: 'image', value: 'image/37_3_p5.png' },
                    { type: 'image', value: 'image/37_4_p5.png' }
                ],
                correctAnswer: 1
            };

            quizData.questions[37] = {
                id: 38,
                section: "Listening",
                question: "[38 – 40] 이야기를 듣고 질문에 알맞은 대답을 고르십시오.",
                description: "38. 여자는 지금 왜 여기에 왔습니까?",
                audio: "audio/38_p5.mp3",
                options: ["아파트를 팔려고", "아파트를 구하려고", "아파트를 바꾸려고", "아파트를 사려고."],
                correctAnswer: 1
            };

            quizData.questions[38] = {
                id: 39,
                section: "Listening",
                question: "",
                description: "39. 대화를 듣고 내용과 같은 것을 고르십시오.",
                audio: "audio/39_p5.mp3",
                options: ["남자는 혼자 기차를 탑니다.", "여자는 친구와 함께 부산에 갑니다.", "여자는 기차표가 다 팔렸다고 말했습니다.", "남자는 부산에 가는 기차표를 두 장 삽니다."],
                correctAnswer: 3
            };

            quizData.questions[39] = {
                id: 40,
                section: "Listening",
                question: "",
                description: "40. 대화를 듣고 내용과 같은 것을 고르십시오.",
                audio: "audio/40_p5.mp3",
                options: ["여자는 내일 면접을 봅니다.", "남자는 집에 좋은 구두가 많습니다.", "여자는 백화점에 가는 중이었습니다.", "남자는 면접에 신고 갈 구두를 살 겁니다."],
                correctAnswer: 3
            };

            initializeQuiz();
        }

        function initializeQuiz() {
            generateQuestions();
            generateAnswers();
            updateCorrectAnswers();
            showQuestion(1);
            updateQuestionCounters();
            startTimer();
            updateTimerDisplay();
        }

        function generateQuestions() {
            const soalDiv = document.querySelector('.soal');
            soalDiv.innerHTML = '';

            quizData.questions.forEach(q => {
                const questionHTML = `
                <div class="pertanyaan" data-id="${q.id}" style="position: relative;">
                    <h3>${q.question}</h3>
                    ${q.description ? `<div class="deskripsi-soal">${q.description}</div>` : ''}

                    ${q.additionalText ? `
                        <div class="teks-tambahan ${q.textPosition || 'tengah'}" 
                            style="${q.textStyle || ''}">
                            ${q.additionalText}
                        </div>
                    ` : ''}

                    ${q.textBox2 ? `
                        <div class="text-box-2">
                            ${q.textBox2}
                        </div>
                    ` : ''}

                    ${q.audio ? `
                    <div id="audio-control-${q.id}" class="audio-control" style="display: block;">
                        <div class="custom-audio-player">
                            <img src="play-icon.png" 
                                alt="Play" 
                                id="play-icon-${q.id}" 
                                class="audio-icon"
                                onclick="playAudio(${q.id}, '${q.audio}')">
                        </div>
                    </div>
                    ` : ''}

                    ${q.textBox ? `
                        <div class="text-box">
                            ${q.textBox}
                        </div>
                    ` : ''}

                    ${q.image ? `
                        <div class="gambar-container">
                            <img src="${q.image}" alt="Gambar soal ${q.id}" onclick="bukaZoom(this.src)">
                        </div>
                    ` : ''}
                </div>
                `;
                soalDiv.insertAdjacentHTML('beforeend', questionHTML);
            });
        }

        function underlineLastWord(sentence) {
            const match = sentence.match(/(.+ )(.+?)$/);
            if (!match) return sentence;
            return `${match[1]}<u>${match[2]}</u>`;
        }

        function generateAnswers() {
            const jawabanDiv = document.querySelector('.jawaban');
            jawabanDiv.innerHTML = '';

            quizData.questions.forEach(q => {
                const answerHTML = `
            <div class="jawaban-container" data-question="${q.id}" ${q.id !== 1 ? 'style="display:none;"' : ''}>
                ${q.options.map((option, index) => {
                    let content = '';

                    if (typeof option === 'object' && option !== null) {
                        if (option.type === 'image') {
                            content = `
                                <div onclick="event.stopPropagation(); bukaZoom('${option.value}')" style="cursor: pointer;">
                                    <img src="${option.value}" class="jawaban-gambar" alt="Option ${index + 1}">
                                </div>
                            `;
                        } else if (option.type === 'audio') {
                            content = `
                                <div class="jawaban-audio-player" id="jawaban-audio-${q.id}-${index}">
                                    <button onclick="playJawabanAudio(${q.id}, ${index}, '${option.value}')">
                                        <img src="play-icon.png" alt="Play" id="jawaban-play-icon-${q.id}-${index}">
                                    </button>
                                </div>
                            `;
                        } else {
                            content = option.value || '';
                        }
                    } else {
                        content = option || '';
                    }

                    return `
                        <div class="jawaban-item">
                            <div class="lingkaran" onclick="pilihJawaban(this)">${index + 1}</div>
                            <div class="jawaban-content">
                                ${content}
                            </div>
                        </div>
                    `;
                }).join('')}
            </div>
        `;
                jawabanDiv.insertAdjacentHTML('beforeend', answerHTML);
            });
        }
        function updateCorrectAnswers() {
            quizData.questions.forEach(q => {
                correctAnswers[q.id] = (q.correctAnswer + 1).toString();
            });
        }

        function pilihJawaban(el) {
            const item = el.closest(".jawaban-item");
            const container = item.closest(".jawaban-container");
            const questionNumber = parseInt(container.getAttribute("data-question"));

            const isNewAnswer = !userAnswers.hasOwnProperty(questionNumber);

            container.querySelectorAll(".jawaban-item").forEach(el => {
                el.classList.remove("selected");
            });
            item.classList.add("selected");

            userAnswers[questionNumber] = el.textContent.trim();

            if (isNewAnswer) {
                remainingQuestions--;
                updateQuestionCounters();
            }

            updateNavButtons();
        }

        function bukaZoom(src) {
            const overlay = document.getElementById("zoomOverlay");
            const gambar = document.getElementById("gambarZoom");

            overlay.style.zIndex = '100000';
            overlay.style.display = "flex";
            document.body.style.overflow = "hidden";
            gambar.src = src;
            gambar.style.transform = 'none';
            gambar.style.maxWidth = 'none';
            gambar.style.maxHeight = 'none';

            if (panzoomInstance) panzoomInstance.destroy();

            gambar.onload = function () {
                const imgRatio = this.naturalWidth / this.naturalHeight;
                const screenRatio = window.innerWidth / window.innerHeight;

                if (imgRatio > screenRatio) {
                    this.style.width = '90vw';
                    this.style.height = 'auto';
                } else {
                    this.style.width = 'auto';
                    this.style.height = '90vh';
                }

                panzoomInstance = Panzoom(this, {
                    maxScale: 5,
                    minScale: 0.8,
                    contain: 'outside',
                    startScale: 1,
                    step: 0.2,
                    animate: true,
                    duration: 200,
                    easing: 'ease-in-out',
                    panOnlyWhenZoomed: true,
                    disablePan: false,
                    disableZoom: false,
                    disableXAxis: false,
                    disableYAxis: false,
                    cursor: 'move'
                });

                const zoomArea = document.querySelector('.zoom-area');
                zoomArea.addEventListener('wheel', function (e) {
                    e.preventDefault();
                    panzoomInstance.zoomWithWheel(e);
                }, { passive: false });

                zoomArea.addEventListener('touchmove', function (e) {
                    if (e.touches.length === 2) e.preventDefault();
                }, { passive: false });
            };
        }

        function tutupZoom() {
            const overlay = document.getElementById("zoomOverlay");
            overlay.style.display = "none";
            document.body.style.overflow = "auto";
            if (panzoomInstance) {
                panzoomInstance.destroy();
                panzoomInstance = null;
            }
        }

        function showQuestion(questionNumber) {
            if (questionNumber < 1) questionNumber = 1;
            if (questionNumber > totalQuestions) questionNumber = totalQuestions;

            const readingHeader = document.querySelector('.header-bar div:nth-child(1)');
            readingHeader.textContent = questionNumber <= 20 ? 'Reading (20 Questions)' : 'Listening (20 Questions)';

            document.querySelectorAll('.pertanyaan').forEach(q => q.classList.remove('active'));
            const questionElement = document.querySelector(`.pertanyaan[data-id="${questionNumber}"]`);
            if (questionElement) questionElement.classList.add('active');

            document.querySelectorAll('.jawaban-container').forEach(a => a.style.display = 'none');
            const currentAnswerContainer = document.querySelector(`.jawaban-container[data-question="${questionNumber}"]`);
            if (currentAnswerContainer) {
                currentAnswerContainer.style.display = 'block';
                if (userAnswers[questionNumber]) {
                    const circles = currentAnswerContainer.querySelectorAll('.lingkaran');
                    circles.forEach(circle => {
                        if (circle.textContent.trim() === userAnswers[questionNumber]) {
                            circle.closest('.jawaban-item').classList.add('selected');
                        }
                    });
                }
            }

            stopAllAudio();
            currentQuestion = questionNumber;
            updateNavButtons();
            updateCurrentQuestionDisplay();
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) showQuestion(currentQuestion + 1);
        }

        function prevQuestion() {
            if (currentQuestion > 1) showQuestion(currentQuestion - 1);
        }

        function updateNavButtons() {
            const prevBtn = document.querySelector('.footer-button button:first-child');
            const nextBtn = document.querySelector('.footer-button button:last-child');

            prevBtn.disabled = currentQuestion === 1;

            if (currentQuestion === totalQuestions) {
                nextBtn.textContent = "Finish";
                nextBtn.onclick = finishQuiz;
            } else {
                nextBtn.textContent = "Next Question";
                nextBtn.onclick = nextQuestion;
            }
        }

        function updateCurrentQuestionDisplay() {
            document.getElementById('current-question').textContent = currentQuestion;
        }

        function updateQuestionCounters() {
            document.querySelector('.header-bar div:nth-child(5)').textContent = remainingQuestions;
            document.querySelector('.header-bar div:nth-child(3)').textContent = '40';
        }

        function showQuestionList() {
            const questionListOverlay = document.createElement('div');
            questionListOverlay.id = 'questionListOverlay';
            questionListOverlay.style.position = 'fixed';
            questionListOverlay.style.top = '0';
            questionListOverlay.style.left = '0';
            questionListOverlay.style.width = '100vw';
            questionListOverlay.style.height = '100vh';
            questionListOverlay.style.backgroundColor = 'white';
            questionListOverlay.style.display = 'flex';
            questionListOverlay.style.justifyContent = 'center';
            questionListOverlay.style.alignItems = 'center';
            questionListOverlay.style.zIndex = '10000';

            const questionListContainer = document.createElement('div');
            questionListContainer.style.backgroundColor = 'white';
            questionListContainer.style.padding = '10px';
            questionListContainer.style.border = 'none';
            questionListContainer.style.maxWidth = '800px';
            questionListContainer.style.maxHeight = '90vh';
            questionListContainer.style.overflowY = 'auto';
            questionListContainer.style.display = 'flex';
            questionListContainer.style.flexDirection = 'column';

            const mainTitle = document.createElement('h2');
            mainTitle.textContent = 'Question List';
            mainTitle.style.textAlign = 'center';
            mainTitle.style.marginTop = '2px';
            mainTitle.style.marginBottom = '2px';
            mainTitle.style.color = '#333';
            questionListContainer.appendChild(mainTitle);

            const sectionsContainer = document.createElement('div');
            sectionsContainer.style.display = 'flex';
            sectionsContainer.style.gap = '30px';
            sectionsContainer.style.justifyContent = 'center';

            const readingSection = document.createElement('div');
            readingSection.style.flex = '1';

            const readingTitle = document.createElement('h3');
            readingTitle.textContent = 'Reading (1-20)';
            readingTitle.style.textAlign = 'center';
            readingTitle.style.marginBottom = '15px';
            readingTitle.style.color = '#2c7be5';
            readingSection.appendChild(readingTitle);

            const readingGrid = document.createElement('div');
            readingGrid.style.display = 'grid';
            readingGrid.style.gridTemplateColumns = 'repeat(5, 1fr)';
            readingGrid.style.gap = '10px';

            for (let i = 1; i <= 20; i++) {
                const questionBtn = createQuestionButton(i);
                readingGrid.appendChild(questionBtn);
            }

            readingSection.appendChild(readingGrid);
            sectionsContainer.appendChild(readingSection);

            const listeningSection = document.createElement('div');
            listeningSection.style.flex = '1';

            const listeningTitle = document.createElement('h3');
            listeningTitle.textContent = 'Listening (21-40)';
            listeningTitle.style.textAlign = 'center';
            listeningTitle.style.marginBottom = '15px';
            listeningTitle.style.color = '#2c7be5';
            listeningSection.appendChild(listeningTitle);

            const listeningGrid = document.createElement('div');
            listeningGrid.style.display = 'grid';
            listeningGrid.style.gridTemplateColumns = 'repeat(5, 1fr)';
            listeningGrid.style.gap = '10px';

            for (let i = 21; i <= 40; i++) {
                const questionBtn = createQuestionButton(i);
                listeningGrid.appendChild(questionBtn);
            }

            listeningSection.appendChild(listeningGrid);
            sectionsContainer.appendChild(listeningSection);

            questionListContainer.appendChild(sectionsContainer);

            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'Close';
            closeBtn.style.display = 'block';
            closeBtn.style.margin = '20px auto 0';
            closeBtn.style.padding = '8px 20px';
            closeBtn.style.backgroundColor = '#6eb0f1';
            closeBtn.style.color = 'white';
            closeBtn.style.border = 'none';
            closeBtn.style.borderRadius = '4px';
            closeBtn.style.cursor = 'pointer';
            closeBtn.onclick = function () {
                document.body.removeChild(questionListOverlay);
            };

            questionListContainer.appendChild(closeBtn);
            questionListOverlay.appendChild(questionListContainer);
            document.body.appendChild(questionListOverlay);
        }

        function createQuestionButton(questionNumber) {
            const questionBtn = document.createElement('button');
            questionBtn.textContent = questionNumber;
            questionBtn.style.width = '60px';
            questionBtn.style.height = '40px';
            questionBtn.style.borderRadius = '15%';
            questionBtn.style.border = '1px solid #ccc';
            questionBtn.style.cursor = 'pointer';
            questionBtn.style.fontWeight = 'bold';
            questionBtn.style.transition = 'all 0.2s';

            if (questionNumber === currentQuestion) {
                questionBtn.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';
                questionBtn.style.color = 'black';
                questionBtn.style.transform = 'none';
                questionBtn.style.boxShadow = 'none';
            }

            if (userAnswers[questionNumber]) {
                questionBtn.style.backgroundColor = userAnswers[questionNumber] === correctAnswers[questionNumber] ? 'black' : 'black';
                questionBtn.style.color = 'white';
            }

            questionBtn.onclick = function () {
                const overlay = document.getElementById('questionListOverlay');
                if (overlay) {
                    document.body.removeChild(overlay);
                }
                showQuestion(questionNumber);
            };

            questionBtn.onmouseover = function () {
                if (questionNumber !== currentQuestion) {
                    this.style.backgroundColor = 'none';
                }
            };

            questionBtn.onmouseout = function () {
                if (questionNumber !== currentQuestion) {
                    this.style.backgroundColor = 'none';
                }
            };

            return questionBtn;
        }

        function finishQuiz() {
            const dialog = document.createElement('div');
            dialog.className = 'custom-dialog';
            dialog.innerHTML = `
                <div class="custom-dialog-content">
                    <h3>Konfirmasi</h3>
                    <p>Apakah Anda yakin ingin menyelesaikan Ujian dan melihat hasil?</p>
                    <div class="custom-dialog-buttons">
                        <button class="custom-dialog-button custom-dialog-cancel">Batal</button>
                        <button class="custom-dialog-button custom-dialog-confirm">Ya, Selesaikan</button>
                    </div>
                </div>
            `;

            document.body.appendChild(dialog);

            dialog.querySelector('.custom-dialog-cancel').addEventListener('click', () => {
                document.body.removeChild(dialog);
            });

            dialog.querySelector('.custom-dialog-confirm').addEventListener('click', () => {
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }

                document.body.removeChild(dialog);
                showQuizResults();
            });
        }

        function showQuizResults() {
            score = 0;
            for (let i = 1; i <= totalQuestions; i++) {
                if (userAnswers[i] && userAnswers[i] === correctAnswers[i]) {
                    score++;
                }
            }

            const resultOverlay = document.createElement('div');
            resultOverlay.className = 'result-overlay';

            const resultContent = document.createElement('div');
            resultContent.className = 'result-content';
            resultContent.innerHTML = `
                <h2 style="color: #2c7be5; margin-bottom: 20px; text-align: center;">Results</h2>
                <div style="display: flex; justify-content: space-around; margin-bottom: 30px;">
                    <div style="flex: 1; text-align: center;">
                        <h3 style="color: #4CAF50;">Reading</h3>
                        <p>${calculateSectionScore(1, 20)}/20</p>
                        <p>${Math.round(calculateSectionScore(1, 20) / 20 * 100)}%</p>
                    </div>
                    <div style="flex: 1; text-align: center;">
                        <h3 style="color: #f44336;">Listening</h3>
                        <p>${calculateSectionScore(21, 40)}/20</p>
                        <p>${Math.round(calculateSectionScore(21, 40) / 20 * 100)}%</p>
                    </div>
                </div>
                <h3 style="margin-bottom: 10px; text-align: center;">Total Score</h3>
                <p style="font-size: 24px; font-weight: bold; margin-bottom: 30px; text-align: center;">${score}/${totalQuestions}</p>
                <button id="reviewBtn" class="close-result-btn">Review All Answers</button>
            `;

            resultOverlay.appendChild(resultContent);
            document.body.appendChild(resultOverlay);

            document.getElementById('reviewBtn').addEventListener('click', () => {
                document.body.removeChild(resultOverlay);
                showAllQuestionsReview();
            });
        }

        function showAllQuestionsReview() {
            const reviewOverlay = document.createElement('div');
            reviewOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background-color: white;
                overflow-y: auto;
                z-index: 10000;
                padding: 5px;
            `;

            const header = document.createElement('div');
            header.style.cssText = `
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                margin-left: 40px;
                padding-bottom: 10px;
                border-bottom: 1px solid #eee;
            `;

            const title = document.createElement('h2');
            title.textContent = 'Review All Answers';
            title.style.color = '#2c7be5';
            header.appendChild(title);
            reviewOverlay.appendChild(header);

            const questionsContainer = document.createElement('div');
            questionsContainer.style.maxWidth = '750px';
            questionsContainer.style.margin = '0 auto';

            for (let i = 1; i <= totalQuestions; i++) {
                if (i === 1 || i === 21) {
                    const sectionLabel = document.createElement('h3');
                    sectionLabel.textContent = i === 1 ? 'Reading Section (1-20)' : 'Listening Section (21-40)';
                    sectionLabel.style.cssText = `
                        color: ${i === 1 ? '#4CAF50' : '#f44336'};
                        margin-bottom: 15px;
                        margin-left: 20px;
                        margin-right: 20px;
                        padding-bottom: 5px;
                        border-bottom: 2px solid ${i === 1 ? '#4CAF50' : '#f44336'};
                    `;
                    questionsContainer.appendChild(sectionLabel);
                }

                const questionData = quizData.questions.find(q => q.id === i) || {};
                const questionDiv = document.createElement('div');
                questionDiv.className = 'review-question';

                const questionHeader = document.createElement('div');
                questionHeader.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 15px;
                `;

                const questionNumber = document.createElement('h3');
                questionNumber.textContent = `Question ${i}`;
                questionNumber.style.margin = '0';
                questionNumber.style.color = 'white';

                const answerStatus = document.createElement('span');
                if (userAnswers[i]) {
                    const isCorrect = userAnswers[i] == (questionData.correctAnswer + 1);
                    answerStatus.textContent = isCorrect ? '✓ Correct' : '✗ Incorrect';
                    answerStatus.style.cssText = `
                        color: ${isCorrect ? '#4CAF50' : '#f44336'};
                        font-weight: bold;
                    `;
                } else {
                    answerStatus.textContent = 'Not answered';
                    answerStatus.style.cssText = `
                        color: #9E9E9E;
                        font-weight: bold;
                    `;
                }

                questionHeader.appendChild(questionNumber);
                questionHeader.appendChild(answerStatus);
                questionDiv.appendChild(questionHeader);

                const questionContent = document.createElement('div');
                questionContent.className = 'review-question-content';

                if (questionData.question) {
                    const questionText = document.createElement('p');
                    questionText.style.cssText = `
                        font-weight: bold;
                        margin-bottom: 10px;
                    `;
                    questionText.textContent = questionData.question;
                    questionContent.appendChild(questionText);
                }

                if (questionData.description) {
                    const descText = document.createElement('p');
                    descText.textContent = questionData.description;
                    questionContent.appendChild(descText);
                }

                if (questionData.textBox) {
                    const textBoxDiv = document.createElement('div');
                    textBoxDiv.className = 'text-box';
                    textBoxDiv.innerHTML = questionData.textBox;
                    questionContent.appendChild(textBoxDiv);
                }

                if (questionData.textBox2) {
                    const textBox2Div = document.createElement('div');
                    textBox2Div.className = 'text-box-2';
                    textBox2Div.innerHTML = questionData.textBox2;
                    questionContent.appendChild(textBox2Div);
                }

                if (questionData.image) {
                    const questionImage = document.createElement('img');
                    questionImage.src = questionData.image;
                    questionImage.className = 'review-image';
                    questionImage.onclick = (e) => {
                        e.stopPropagation();
                        e.preventDefault();
                        bukaZoom(questionData.image);
                    };
                    questionContent.appendChild(questionImage);
                }

                if (questionData.audio) {
                    questionContent.appendChild(createAudioPlayer(questionData.audio, i.toString(), 'Play Question Audio'));
                }

                questionDiv.appendChild(questionContent);

                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'review-options';

                const options = questionData.options || ["Option 1", "Option 2", "Option 3", "Option 4"];
                const correctAnswerIndex = questionData.correctAnswer || 0;
                const userAnswerIndex = userAnswers[i] ? parseInt(userAnswers[i]) - 1 : -1;

                for (let j = 0; j < options.length; j++) {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'review-option';
                    if (j === correctAnswerIndex) optionDiv.classList.add('correct');
                    if (j === userAnswerIndex) optionDiv.classList.add('user-selected');

                    const optionNumber = document.createElement('div');
                    optionNumber.className = 'review-option-number';
                    optionNumber.textContent = j + 1;
                    optionDiv.appendChild(optionNumber);

                    const optionContent = document.createElement('div');
                    optionContent.style.flexGrow = '1';

                    if (typeof options[j] === 'object' && options[j] !== null && options[j].type) {
                        switch (options[j].type) {
                            case 'image':
                                const optionImage = document.createElement('img');
                                optionImage.src = options[j].value;
                                optionImage.className = 'review-image';
                                optionContent.className = 'review-option-content';
                                optionImage.alt = `Option ${j + 1}`;
                                optionImage.style.cursor = 'pointer';
                                optionImage.onclick = (e) => {
                                    e.stopPropagation();
                                    e.preventDefault();
                                    bukaZoom(options[j].value);
                                };
                                optionContent.appendChild(optionImage);
                                break;

                            case 'audio':
                                const audioContainer = createAudioPlayer(options[j].value, `${i}-${j}`, `Play Option ${j + 1} Audio`);
                                optionContent.appendChild(audioContainer);
                                break;

                            default:
                                optionContent.innerHTML = options[j].value || '';
                        }
                    } else {
                        optionContent.innerHTML = options[j] || '';
                    }

                    optionDiv.appendChild(optionContent);
                    optionsContainer.appendChild(optionDiv);
                }

                questionDiv.appendChild(optionsContainer);
                questionsContainer.appendChild(questionDiv);
            }

            const closeBtnContainer = document.createElement('div');
            closeBtnContainer.style.cssText = `
                display: flex;
                justify-content: center;
                margin-top: 30px;
                margin-bottom: 50px;
            `;

            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'Close';
            closeBtn.style.cssText = `
                padding: 12px 24px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
            `;
            closeBtn.onclick = () => {
                if (reviewOverlay && reviewOverlay.parentNode) {
                    reviewOverlay.parentNode.removeChild(reviewOverlay);
                }
                window.location.replace('index.html');
            };
            closeBtnContainer.appendChild(closeBtn);
            questionsContainer.appendChild(closeBtnContainer);

            reviewOverlay.appendChild(questionsContainer);
            document.body.appendChild(reviewOverlay);
        }

        function createAudioPlayer(audioSrc, id, labelText) {
            const audioContainer = document.createElement('div');
            audioContainer.style.width = '100%';
            audioContainer.style.marginTop = '10px';

            const audioPlayer = document.createElement('div');
            audioPlayer.style.display = 'flex';
            audioPlayer.style.alignItems = 'center';
            audioPlayer.style.gap = '10px';

            const audioBtn = document.createElement('button');
            audioBtn.className = 'review-audio-btn';
            audioBtn.onclick = () => playReviewAudio(audioSrc, audioBtn);

            const audioIcon = document.createElement('img');
            audioIcon.src = 'play-icon.png';
            audioIcon.alt = 'Play';
            audioIcon.style.width = '60px';
            audioIcon.style.height = '60px';
            audioBtn.appendChild(audioIcon);

            const audioLabel = document.createElement('span');
            audioLabel.textContent = labelText;
            audioLabel.style.fontSize = '14px';

            audioPlayer.appendChild(audioBtn);
            audioPlayer.appendChild(audioLabel);
            audioContainer.appendChild(audioPlayer);

            const transcriptId = id.includes('-') ? id : `${id}`;

            console.log(`Mencari transcript untuk ID: ${transcriptId}`);
            console.log('Data transcript tersedia:', audioTranscripts);

            if (audioTranscripts && audioTranscripts[transcriptId]) {
                const transcript = document.createElement('div');
                transcript.className = 'audio-transcript';
                transcript.innerHTML = audioTranscripts[transcriptId];
                audioContainer.appendChild(transcript);
            } else {
                console.warn(`Transcript tidak ditemukan untuk ID: ${transcriptId}`);
            }

            return audioContainer;
        }

        function playAudio(questionId, audioSrc) {
            const playIcon = document.getElementById(`play-icon-${questionId}`);

            if (audioPlayCounts[questionId] >= 2) {
                playIcon.style.pointerEvents = 'none';
                playIcon.style.opacity = '0.5';
                return;
            }

            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }

            audioPlayCounts[questionId] = (audioPlayCounts[questionId] || 0) + 1;
            currentAudio = new Audio(audioSrc);

            currentAudio.onplay = () => {
                playIcon.src = "pause-icon.png";
                playIcon.alt = "Pause";
                playIcon.classList.add("playing");
            };

            currentAudio.onpause = () => {
                playIcon.src = "play-icon.png";
                playIcon.alt = "Play";
                playIcon.classList.remove("playing");
            };

            currentAudio.onended = () => {
                playIcon.src = "play-icon.png";
                playIcon.alt = "Play";
                playIcon.classList.remove("playing");

                if (audioPlayCounts[questionId] >= 2) {
                    playIcon.style.pointerEvents = 'none';
                    playIcon.style.opacity = '0.5';
                }
            };


            currentAudio.play();
        }
        function playJawabanAudio(questionId, optionIndex, audioSrc) {
            if (jawabanAudioPlayCounts[`${questionId}-${optionIndex}`] >= 2) return;
            stopAllAudio();

            jawabanAudioPlayCounts[`${questionId}-${optionIndex}`] = (jawabanAudioPlayCounts[`${questionId}-${optionIndex}`] || 0) + 1;
            currentAudio = new Audio(audioSrc);
            const playIcon = document.getElementById(`jawaban-play-icon-${questionId}-${optionIndex}`);
            const audioBtn = playIcon.parentElement;

            currentAudio.onplay = () => {
                playIcon.src = "pause-icon.png";
                playIcon.alt = "Pause";
            };

            currentAudio.onpause = () => {
                playIcon.src = "play-icon.png";
                playIcon.alt = "Play";
            };

            currentAudio.onended = () => {
                playIcon.src = "play-icon.png";
                playIcon.alt = "Play";
                if (jawabanAudioPlayCounts[`${questionId}-${optionIndex}`] >= 2) audioBtn.disabled = true;
            };

            currentAudio.play();
        }

        function stopAllAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            document.querySelectorAll('[id^="jawaban-play-icon-"]').forEach(icon => {
                icon.src = "play-icon.png";
                icon.alt = "Play";
            });
        }
        function playReviewAudio(audioSrc, button) {
            const audioIcon = button.querySelector('img');

            if (currentReviewAudio && currentReviewAudio.src.endsWith(audioSrc)) {
                if (!currentReviewAudio.paused) {
                    currentReviewAudio.pause();
                    audioIcon.src = 'play-icon.png';
                    audioIcon.alt = 'Play';
                    return;
                } else {
                    currentReviewAudio.play();
                    audioIcon.src = 'pause-icon.png';
                    audioIcon.alt = 'Pause';
                    return;
                }
            }

            stopAllReviewAudio();
            currentReviewAudio = new Audio(audioSrc);
            currentReviewAudioButton = button;

            let playerContainer = button.nextElementSibling;
            if (!playerContainer || !playerContainer.classList.contains('audio-player-container')) {
                playerContainer = document.createElement('div');
                playerContainer.className = 'audio-player-container';
                button.parentNode.insertBefore(playerContainer, button.nextSibling);
            } else {
                playerContainer.innerHTML = '';
            }

            const progressContainer = document.createElement('div');
            progressContainer.className = 'progress-container';
            const progressBar = document.createElement('div');
            progressBar.className = 'progress-bar';
            progressContainer.appendChild(progressBar);

            const timeContainer = document.createElement('div');
            timeContainer.className = 'time-container';

            currentTimeDisplay = document.createElement('span');
            currentTimeDisplay.className = 'current-time';
            currentTimeDisplay.textContent = '0:00';

            durationDisplay = document.createElement('span');
            durationDisplay.className = 'duration';
            durationDisplay.textContent = '0:00';

            timeContainer.appendChild(currentTimeDisplay);
            timeContainer.appendChild(document.createTextNode(' / '));
            timeContainer.appendChild(durationDisplay);

            playerContainer.appendChild(progressContainer);
            playerContainer.appendChild(timeContainer);
            currentProgressContainer = progressContainer;

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            };

            currentReviewAudio.addEventListener('loadedmetadata', () => {
                durationDisplay.textContent = formatTime(currentReviewAudio.duration);
            });

            const updateProgress = () => {
                if (currentReviewAudio && progressBar) {
                    const progress = (currentReviewAudio.currentTime / currentReviewAudio.duration) * 100;
                    progressBar.style.width = progress + '%';
                    currentTimeDisplay.textContent = formatTime(currentReviewAudio.currentTime);
                }
            };

            progressContainer.addEventListener('click', (e) => {
                if (!currentReviewAudio) return;
                const rect = progressContainer.getBoundingClientRect();
                const clickPosition = e.clientX - rect.left;
                const containerWidth = rect.width;
                const seekPercentage = Math.min(Math.max(clickPosition / containerWidth, 0), 1);
                currentReviewAudio.currentTime = seekPercentage * currentReviewAudio.duration;
                updateProgress();
            });

            currentReviewAudio.addEventListener('timeupdate', updateProgress);
            currentReviewAudio.addEventListener('ended', resetAudioPlayer);

            currentReviewAudio.onplay = () => {
                audioIcon.src = 'pause-icon.png';
                audioIcon.alt = 'Pause';
            };

            currentReviewAudio.onpause = () => {
                audioIcon.src = 'play-icon.png';
                audioIcon.alt = 'Play';
            };

            currentReviewAudio.play();
        }

        function resetAudioPlayer() {
            if (currentReviewAudioButton) {
                const icon = currentReviewAudioButton.querySelector('img');
                icon.src = 'play-icon.png';
                icon.alt = 'Play';
            }
            if (currentProgressContainer) {
                const progressBar = currentProgressContainer.querySelector('.progress-bar');
                if (progressBar) progressBar.style.width = '0%';
            }
            if (currentTimeDisplay) currentTimeDisplay.textContent = '0:00';
            currentReviewAudio = null;
            currentReviewAudioButton = null;
            currentProgressContainer = null;
            currentTimeDisplay = null;
            durationDisplay = null;
        }

        function stopAllReviewAudio() {
            if (currentReviewAudio) {
                currentReviewAudio.pause();
                resetAudioPlayer();
            }
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')} : ${seconds.toString().padStart(2, '0')}`;

            if (timeLeft <= 5 * 60 && !hasShownFiveMinuteWarning) {
                showTimeWarning();
                hasShownFiveMinuteWarning = true;
            }

            if (timeLeft < 5 * 60) {
                timerDisplay.style.color = '#f44336';
                timerDisplay.style.fontWeight = 'bold';
            }
        }

        function showTimeWarning() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background-color: white;
                color: black;
                padding: 15px 25px;
                border-radius: 5px;
                box-shadow: 0 6px 10px rgba(0,0,0,0.8);
                z-index: 100000;
                animation: fadeIn 0.5s;
            `;
            notification.textContent = 'Peringatan: Waktu tersisa 5 menit!';

            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; top: 0; }
                    to { opacity: 1; top: 20px; }
                }
                @keyframes fadeOut {
                    from { opacity: 1; top: 20px; }
                    to { opacity: 0; top: 0; }
                }
            `;
            document.head.appendChild(style);
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s';
                setTimeout(() => {
                    document.body.removeChild(notification);
                    document.head.removeChild(style);
                }, 500);
            }, 5000);
        }

        function timeUp() {
            clearInterval(timerInterval);

            const timeUpMessage = document.createElement('div');
            timeUpMessage.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0,0,0,0.8);
                color: white;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 24px;
                z-index: 100000;
            `;
            timeUpMessage.textContent = 'Waktu sudah habis! Ujian akan dinilai sekarang';
            document.body.appendChild(timeUpMessage);

            setTimeout(() => {
                document.body.removeChild(timeUpMessage);
                showQuizResults();
            }, 2000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function calculateSectionScore(start, end) {
            let sectionScore = 0;
            for (let i = start; i <= end; i++) {
                if (userAnswers[i] && userAnswers[i] === correctAnswers[i]) {
                    sectionScore++;
                }
            }
            return sectionScore;
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadQuizData();
            loadAudioTranscripts();
        });
    </script>
</body>

</html>